import express from "express";
import helmet from "helmet";
import cors from "cors";
import morgan from "morgan";
import { ENV } from "./lib/env";
import { health } from "./routes/health";
import { pages } from "./routes/pages";
import { usuarios } from "./routes/usuarios";
import { escuelas } from "./routes/escuelas";
import { modulos } from "./routes/modulos";
import { progreso } from "./routes/progreso";
import { libros } from "./routes/libros";
import { seed } from "./routes/seed";
import { auth } from "./routes/auth";
import { reportes } from "./routes/reportes";
import { estadisticas } from "./routes/estadisticas";
import { reportes } from "./routes/reportes";
import { encuestas } from "./routes/encuestas";
const app = express();
app.use(helmet({ contentSecurityPolicy: false }));
app.use(cors({ origin: ENV.CORS_ORIGIN, credentials: true }));
app.use(morgan("tiny"));
app.use(express.json());
app.use(health);
app.use(pages);
app.use(auth);
app.use(usuarios);
app.use(escuelas);
app.use(modulos);
app.use(progreso);
app.use(libros);
app.use(estadisticas);
app.use(seed);
app.use(reportes);
app.use(encuestas);
app.use((_req, res) => res.status(404).json({ error: "not found" }));
app.listen(ENV.PORT, () => {
  console.log(`API on http://localhost:${ENV.PORT}`);
});
